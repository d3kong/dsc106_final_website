<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Surgical Insights – Interactive Atlas</title>

  <link rel="stylesheet" href="style.css" />

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script defer src="js/tracy_main.js"></script>
  <script defer src="js/daniel_main.js"></script>
  <script defer src="js/kate_main.js"></script>
  <script defer src="js/scroll.js"></script>
</head>
<body>

  <!-- ────────────── TITLE SCREEN ────────────── -->
  <section id="slide1" class="title-slide">
    <h1>Pre-operative Mental Preparation</h1>
    <h2>Surgical Risk&nbsp;&amp;&nbsp;Communication</h2>
    <p class="author">Kate Feng · Tracy Vu · Daniel Kong · John&nbsp;Wesley&nbsp;Pabalate</p>
  </section>

  <!-- ────────────── SLIDE 2 – Tracy's Viz ────────────── -->
  <section class="slide hidden" id="slide2">
    <div class="slide-grid">
      <div class="map-cell">
        <div class="body-container" id="wrapper">
          <img id="bodyImg" src="images/surgery_body.png" alt="body map" class="body-image" />
          <svg id="body-map2" viewBox="0 0 494 610" preserveAspectRatio="xMidYMid meet">
            <g transform="translate(0 56)">
              <g id="head_neck" class="region"><circle cx="247" cy="133" r="46"/><rect x="225" y="170" width="44" height="32"/></g>
              <g id="thorax"     class="region"><path d="M195 196 Q247 158 299 196 L299 286 Q247 322 195 286 Z"/></g>
              <g id="abdomen"    class="region"><path d="M205 304 Q247 334 289 304 L289 374 Q247 404 205 374 Z"/></g>
              <g id="pelvis"     class="region"><path d="M215 392 Q247 422 279 392 L279 462 Q247 492 215 462 Z"/></g>
            </g>
          </svg>
        </div>
        <p class="body-hint">Click on the body to filter operation&nbsp;types</p>
      </div>
      <div class="panel-cell">
        <h2>Risk &amp; Demographic Patterns</h2>
        <div class="control-row">
          <label for="metricSelector">Metric:</label>
          <select id="metricSelector"></select>
          <button id="resetButton">Reset</button>
        </div>
        <div class="viz-block">
          <svg id="plot" width="340" height="350"></svg>
          <div id="detailsBox" class="details">
            <strong>Click a boxplot</strong> or use the metric filter to see details
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ────────────── SLIDE 3 – Daniel's Heatmap ────────────── -->
  <section class="slide hidden" id="slide3">
    <div class="slide-grid">
      <h2>Patient Profiles: Radar Chart</h2>
      <div class="map-cell">
        <div class="body-container" id="wrapper">
          <img id="bodyImg" src="images/surgery_body.png" alt="body map" class="body-image" />
          <svg id="body-map2" viewBox="0 0 494 610" preserveAspectRatio="xMidYMid meet">
            <g transform="translate(0 56)">
              <g id="head_neck" class="region"><circle cx="247" cy="133" r="46"/><rect x="225" y="170" width="44" height="32"/></g>
              <g id="thorax" class="region"><path d="M195 196 Q247 158 299 196 L299 286 Q247 322 195 286 Z"/></g>
              <g id="abdomen" class="region"><path d="M205 304 Q247 334 289 304 L289 374 Q247 404 205 374 Z"/></g>
              <g id="pelvis" class="region"><path d="M215 392 Q247 422 279 392 L279 462 Q247 492 215 462 Z"/></g>
            </g>
          </svg>
        </div>
        <p class="body-hint">Click on the body to filter operation&nbsp;types</p>
      </div>

      <div id="heatmap" class="viz-block" style="position: relative;">
        <!-- Dropdown inserted by JS -->
        <!-- SVG inserted by JS -->
      </div>
      <div id="heatmap-details" class="details" style="margin-top:10px; font-family: sans-serif; font-size: 14px;">
        <em>Hover over cells and press <kbd>click</kbd> to see details here.</em>
      </div>
      <p class="body-hint">Shows the different metrics that contribute to anxiety ranges for different surgeries hello</p>
    </div>
  </section>

  <!-- ────────────── SLIDE 4 – Kate's Guide ────────────── -->
  <section class="slide hidden" id="slide4">
    <div class="slide-grid">
  
      <!-- LEFT: Body Map -->
      <div class="map-cell">
        <div class="body-container" id="wrapper">
          <img id="bodyImg" src="images/surgery_body.png" alt="body map" class="body-image" />
          <svg id="body-map2" viewBox="0 0 494 610" preserveAspectRatio="xMidYMid meet">
            <g transform="translate(0 56)">
              <g id="head_neck" class="region"><circle cx="247" cy="133" r="46"/><rect x="225" y="170" width="44" height="32"/></g>
              <g id="thorax" class="region"><path d="M195 196 Q247 158 299 196 L299 286 Q247 322 195 286 Z"/></g>
              <g id="abdomen" class="region"><path d="M205 304 Q247 334 289 304 L289 374 Q247 404 205 374 Z"/></g>
              <g id="pelvis" class="region"><path d="M215 392 Q247 422 279 392 L279 462 Q247 492 215 462 Z"/></g>
            </g>
          </svg>
        </div>
        <p class="body-hint">Click on the body to filter operation&nbsp;types</p>
      </div>
  
      <!-- RIGHT: Panel -->
      <div class="panel-cell">
        <h2>Guided Preparation Tips</h2>
        <h3>What to Tell Your Patient?</h3>
  
        <div class="control-row">
          <!-- AGE -->
          <div class="slider-container">
            <label for="ageSlider">
              Age: <span id="ageValue" class="slider-value">50</span>
            </label>
            <input type="range" id="ageSlider" min="0" max="100" value="50" />
            <div class="slider-tooltip" id="ageSliderTooltip"></div>
          </div>

          <!-- HEIGHT -->
          <div class="slider-container">
            <label for="heightSlider">
              Height (cm): <span id="heightValue" class="slider-value">155</span>
            </label>
            <input type="range" id="heightSlider" min="100" max="210" value="155" />
            <div class="slider-tooltip" id="heightSliderTooltip"></div>
          </div>
          <!-- WEIGHT -->
          <div class="slider-container">
            <label for="weightSlider">
              Weight (kg): <span id="weightValue" class="slider-value">90</span>
            </label>
            <input type="range" id="weightSlider" min="30" max="150" value="90" />
            <div class="slider-tooltip" id="weightSliderTooltip"></div>
          </div>

          <!-- GENDER SELECT -->
          <div class="select-container">
            <label for="sexFilter">Gender:</label>
            <select id="sexFilter">
              <option value="all">All</option>
              <option value="M">Male</option>
              <option value="F">Female</option>
            </select>
          </div>

          <!-- OPERATION REGION SELECT -->
          <div class="select-container">
            <label for="regionFilter">Anatomical Region:</label>
            <select id="regionFilter">
              <option value="all">All</option>
              <option value="Colorectal">Colorectal</option>
              <option value="Biliary/Pancreas">Biliary/Pancreas</option>
              <option value="Others">Others</option>
              <option value="Stomach">Stomach</option>
              <option value="Major resection">Major resection</option>
              <option value="Minor resection">Minor resection</option>
              <option value="Breast">Breast</option>
              <option value="Transplantation">Transplantation</option>
              <option value="Vascular">Vascular</option>
              <option value="Hepatic">Hepatic</option>
              <option value="Thyroid">Thyroid</option>
            </select>
          </div>
        </div>
  
        <div class="viz-block">
          <svg id="chart" width="340" height="350"></svg>
          <div id="summary" class="card summary">
            <strong>Use controls to explore</strong>
          </div>
        </div>
      </div>
    </div>
    <p class="body-hint">Tailored patient preparation tips based on risk and body region.</p>
  </section>


  <!-- ────────────── SLIDE 5 – Conclusion ────────────── -->
  <section class="slide hidden" id="slide5">
    <div class="conclusion">
      <h2>Surgical care begins long before the incision.</h2>
      <p>By using data to predict risk, anticipate anxiety, and prepare tailored guidance, you’re helping your patient face their operation not with fear—but with clarity. This isn't about outcomes. It's about making the journey to the operating room more transparent, more informed, and more human.</p>
      <h2>What have we done so far?</h2>
      <p>So far, our group has put together the layout of the website, which John Wesley has been working on in Figma. We have all the text for each slide written down, and are working on integrating them into each visualization. While all of our visualizations are ready, there are still a few that need to be integrated properly into the final website (ex. The radar chart and guide at the end). The body to the left is clickable, but still needs to be used as a filter for the visualizations on the right.</p>
      <h2>Most challenging part?</h2>
      <p>The most challenging part will likely be making sure all the visualizations work together in one website. We currently have each visualization in a separate brainstorming repo (each with its own js and html folder). Making sure all of them work together in singular html, js, and css files will be time-consuming. Once we have all of them together, having them look visually appealing next to each other and putting them into a “scrolly-telling” style will take some time.</p>
    </div>
  </section>
  <img src="images/prototype.png" alt="alternatetext">

</body>
</html>
